<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#14181c">
  <title>Episodic - TV Episode Tracker</title>
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #14181c;
      color: #fff;
      overflow-x: hidden;
    }
    
    #root {
      min-height: 100vh;
      padding-bottom: 80px;
    }

    /* Smooth scrolling */
    * {
      -webkit-overflow-scrolling: touch;
    }

    /* Hide scrollbars */
    ::-webkit-scrollbar {
      display: none;
    }

    /* Animations */
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInFromBottom {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .animate-in {
      animation: slideUp 0.3s ease-out forwards;
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    /* Bottom Sheet */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      z-index: 999;
      animation: fadeIn 0.2s;
    }

    .bottom-sheet {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #1c2329;
      border-radius: 20px 20px 0 0;
      z-index: 1000;
      animation: slideInFromBottom 0.3s cubic-bezier(0.32, 0.72, 0, 1);
      max-height: 85vh;
      overflow-y: auto;
    }

    .sheet-handle {
      width: 40px;
      height: 4px;
      background: #456;
      border-radius: 2px;
      margin: 12px auto;
    }

    /* Bottom Nav */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #1c2329;
      border-top: 1px solid #2c3440;
      display: flex;
      z-index: 100;
      padding-bottom: env(safe-area-inset-bottom);
    }

    .nav-btn {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 12px;
      background: none;
      border: none;
      color: #9ab;
      cursor: pointer;
      transition: color 0.2s;
    }

    .nav-btn.active {
      color: #ff8000;
    }

    /* Story Bubbles */
    .stories {
      display: flex;
      gap: 16px;
      padding: 16px 20px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
    }

    .story {
      flex-shrink: 0;
      text-align: center;
      scroll-snap-align: start;
    }

    .story-ring {
      width: 68px;
      height: 68px;
      padding: 3px;
      background: linear-gradient(135deg, #ff8000, #ff6000);
      border-radius: 50%;
      margin-bottom: 8px;
    }

    .story-inner {
      width: 100%;
      height: 100%;
      background: #14181c;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 700;
      color: #ff8000;
    }

    /* Cards */
    .card {
      background: #1c2329;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid #2c3440;
    }

    /* Desktop responsive */
    @media (min-width: 768px) {
      #root {
        max-width: 480px;
        margin: 0 auto;
        box-shadow: 0 0 40px rgba(0,0,0,0.5);
      }
    }

    /* Icons */
    .icon {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    /* FAB */
    .fab {
      position: fixed;
      bottom: 96px;
      right: 20px;
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #ff8000, #ff6000);
      border: none;
      border-radius: 50%;
      color: #14181c;
      box-shadow: 0 8px 24px rgba(255,128,0,0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .fab:active {
      transform: scale(0.9);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useMemo } = React;

    // Mock Data
    const SHOWS = {
      loveIsland: {
        id: 1,
        name: 'Love Island',
        year: '2024',
        poster: 'https://image.tmdb.org/t/p/w500/h9f3vNGZGDRqOw26uwDMYhSLZ01.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/rCqYXh6ztQLpC1BKW3KF0v3DXNP.jpg',
        genre: 'Reality',
        rating: 7.2,
        trending: true
      },
      bachelor: {
        id: 2,
        name: 'The Bachelor',
        year: '2024',
        poster: 'https://image.tmdb.org/t/p/w500/mKadW8gXqVdg01IJYkMHNrzoZ3a.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/jKOuF93E4sjkCYKYMxcjHNKcMXJ.jpg',
        genre: 'Reality',
        rating: 6.8,
        trending: true
      },
      survivor: {
        id: 3,
        name: 'Survivor',
        year: '2024',
        poster: 'https://image.tmdb.org/t/p/w500/ddYkNcvJJ1FJFy3SaZfqTXExkPc.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/zcMz1BKuP6kZlOsF3Ckd4EAF2jg.jpg',
        genre: 'Reality',
        rating: 7.6,
        trending: true
      },
      snl: {
        id: 4,
        name: 'Saturday Night Live',
        year: '1975',
        poster: 'https://image.tmdb.org/t/p/w500/sHGuKFjIBisPk8cvtCZTDVktYfs.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/iM8kss04YCaGPXJqBkS4rHZbJTW.jpg',
        genre: 'Comedy',
        rating: 7.1
      },
      housewives: {
        id: 5,
        name: 'Real Housewives',
        year: '2010',
        poster: 'https://image.tmdb.org/t/p/w500/jCWYWV0TquevYfiJ6pJkGq3Qzhe.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/1TS0T3WEH9bJWCBYV3DykNqhXTi.jpg',
        genre: 'Reality',
        rating: 7.5
      },
      breakingBad: {
        id: 6,
        name: 'Breaking Bad',
        year: '2008',
        poster: 'https://image.tmdb.org/t/p/w500/ztkUQFLlC19CCMYHW9o1zWhJRNq.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/tsRy63Mu5cu8etL1X7ZLyf7UP1M.jpg',
        genre: 'Drama',
        rating: 8.9
      }
    };

    const EPISODES = [
      { id: 1, showId: 1, season: 6, episode: 1, name: 'First Coupling', image: 'https://image.tmdb.org/t/p/w500/h9f3vNGZGDRqOw26uwDMYhSLZ01.jpg', date: 'Jan 13', rating: 7.8, desc: 'Islanders arrive and couple up for first time. Drama begins immediately.' },
      { id: 2, showId: 1, season: 6, episode: 2, name: 'Recoupling Chaos', image: 'https://image.tmdb.org/t/p/w500/rCqYXh6ztQLpC1BKW3KF0v3DXNP.jpg', date: 'Jan 14', rating: 8.2, desc: 'First recoupling brings unexpected twists and broken hearts.' },
      { id: 3, showId: 1, season: 6, episode: 3, name: 'Bombshell Entry', image: 'https://image.tmdb.org/t/p/w500/h9f3vNGZGDRqOw26uwDMYhSLZ01.jpg', date: 'Jan 15', rating: 8.5, desc: 'New bombshell enters and shakes up relationships.' },
      { id: 4, showId: 2, season: 28, episode: 1, name: 'Week 1', image: 'https://image.tmdb.org/t/p/w500/jKOuF93E4sjkCYKYMxcjHNKcMXJ.jpg', date: 'Jan 27', rating: 7.6, desc: 'Joey meets 32 women. Who gets first impression rose?' },
      { id: 5, showId: 3, season: 46, episode: 1, name: 'Hot Mess Express', image: 'https://image.tmdb.org/t/p/w500/zcMz1BKuP6kZlOsF3Ckd4EAF2jg.jpg', date: 'Feb 26', rating: 8.3, desc: 'Eighteen castaways begin battle for $1 million.' },
      { id: 6, showId: 4, season: 50, episode: 2, name: 'Nate Bargatze', image: 'https://image.tmdb.org/t/p/w500/3REhPBPbNnIdHSBsqFxSe5TJNHd.jpg', date: 'Oct 5', rating: 8.9, desc: 'Nate hosts with Coldplay. Viral Washington\'s Dream sketch.' },
      { id: 7, showId: 4, season: 50, episode: 5, name: 'John Mulaney', image: 'https://image.tmdb.org/t/p/w500/5bQ5TynqtB6yIrxHx8mYFmBiDfC.jpg', date: 'Nov 2', rating: 9.5, desc: 'John returns for sixth time. Musical sketches dominate.' }
    ];

    const USERS = {
      current: { id: '1', username: 'tvlover', name: 'TV Lover' },
      user2: { id: '2', username: 'realityfan', name: 'Reality Fan' },
      user3: { id: '3', username: 'snlstan', name: 'SNL Stan' }
    };

    const HOT_TAKES = [
      { id: 1, userId: '2', episodeId: 3, content: 'OMG THAT BOMBSHELL ENTRANCE üò± This is already the best season', time: '15m ago', reactions: { fire: 23, skull: 5 }, isLive: false },
      { id: 2, userId: '1', episodeId: 7, content: 'John Mulaney is a GENERATIONAL talent üî• Best SNL host in years', time: '2h ago', reactions: { fire: 45 }, isLive: false },
      { id: 3, userId: '3', episodeId: 4, content: 'üî¥ WATCHING NOW: This rose ceremony taking FOREVER üåπ', time: '3m ago', reactions: { laugh: 8 }, isLive: true },
      { id: 4, userId: '2', episodeId: 6, content: 'Washington\'s Dream sketch >>>>> Best SNL moment this season üíÄ', time: '5h ago', reactions: { fire: 34 }, isLive: false }
    ];

    const WATCHING_NOW = [
      { userId: '2', episodeId: 2 },
      { userId: '3', episodeId: 4 }
    ];

    const storage = {
      ratings: {},
      watchingNow: []
    };

    // Icon Component
    const Icon = ({ name, size = 24 }) => {
      const icons = {
        Home: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>,
        Flame: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
        User: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
        Search: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>,
        Star: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
        ChevronLeft: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>,
        Plus: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
        X: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      };
      return icons[name];
    };

    // Main App
    function App() {
      const [tab, setTab] = useState('home');
      const [show, setShow] = useState(null);
      const [composer, setComposer] = useState(false);

      return (
        <div>
          {show ? (
            <ShowView show={show} onBack={() => setShow(null)} />
          ) : (
            <>
              {tab === 'home' && <Home onSelect={setShow} />}
              {tab === 'hot-takes' && <HotTakes onSelect={setShow} onCompose={() => setComposer(true)} />}
              {tab === 'profile' && <Profile />}
            </>
          )}
          
          {!show && <BottomNav tab={tab} onChange={setTab} />}
          {composer && <Composer onClose={() => setComposer(false)} />}
        </div>
      );
    }

    // Bottom Nav
    function BottomNav({ tab, onChange }) {
      return (
        <nav className="bottom-nav">
          {[
            { id: 'home', icon: 'Home', label: 'Home' },
            { id: 'hot-takes', icon: 'Flame', label: 'Hot Takes' },
            { id: 'profile', icon: 'User', label: 'Profile' }
          ].map(item => (
            <button
              key={item.id}
              className={`nav-btn ${tab === item.id ? 'active' : ''}`}
              onClick={() => onChange(item.id)}
            >
              <Icon name={item.icon} size={24} />
              <span style={{ fontSize: '11px', fontWeight: '500' }}>{item.label}</span>
            </button>
          ))}
        </nav>
      );
    }

    // Home View
    function Home({ onSelect }) {
      const [search, setSearch] = useState('');
      const [results, setResults] = useState([]);

      const trending = useMemo(() => Object.values(SHOWS).filter(s => s.trending), []);
      const reality = useMemo(() => Object.values(SHOWS).filter(s => s.genre === 'Reality'), []);

      function handleSearch(q) {
        setSearch(q);
        if (!q.trim()) {
          setResults([]);
          return;
        }
        setResults(Object.values(SHOWS).filter(s => s.name.toLowerCase().includes(q.toLowerCase())));
      }

      return (
        <div style={{ minHeight: '100vh', background: '#14181c' }}>
          {/* Header */}
          <div style={{ position: 'sticky', top: 0, background: '#14181c', borderBottom: '1px solid #2c3440', padding: '16px 20px', zIndex: 50 }}>
            <h1 style={{ fontSize: '28px', fontWeight: '700', background: 'linear-gradient(135deg, #ff8000, #ff6000)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', marginBottom: '12px' }}>
              Episodic
            </h1>
            
            <div style={{ position: 'relative' }}>
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px', background: '#2c3440', borderRadius: '12px', padding: '12px 16px' }}>
                <Icon name="Search" size={20} />
                <input
                  type="text"
                  placeholder="Search shows..."
                  value={search}
                  onChange={(e) => handleSearch(e.target.value)}
                  style={{ flex: 1, background: 'none', border: 'none', color: '#fff', fontSize: '16px', outline: 'none' }}
                />
              </div>

              {results.length > 0 && (
                <div className="card" style={{ position: 'absolute', top: '100%', left: 0, right: 0, marginTop: '8px', zIndex: 100, animation: 'fadeIn 0.2s' }}>
                  {results.map(s => (
                    <button
                      key={s.id}
                      onClick={() => { onSelect(s); setResults([]); setSearch(''); }}
                      style={{ width: '100%', display: 'flex', gap: '12px', padding: '12px', background: 'transparent', border: 'none', cursor: 'pointer', textAlign: 'left' }}
                    >
                      <img src={s.poster} alt={s.name} style={{ width: '40px', height: '60px', borderRadius: '6px', objectFit: 'cover' }} />
                      <div>
                        <div style={{ color: '#fff', fontSize: '14px', fontWeight: '600' }}>{s.name}</div>
                        <div style={{ color: '#9ab', fontSize: '12px' }}>{s.year} ‚Ä¢ {s.genre}</div>
                      </div>
                    </button>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* Stories */}
          {WATCHING_NOW.length > 0 && (
            <div className="stories">
              {WATCHING_NOW.map((w, i) => {
                const user = Object.values(USERS).find(u => u.id === w.userId);
                return (
                  <div key={i} className="story">
                    <div className="story-ring pulse">
                      <div className="story-inner">{user.username[0].toUpperCase()}</div>
                    </div>
                    <div style={{ fontSize: '11px', color: '#9ab', maxWidth: '68px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>
                      {user.username}
                    </div>
                  </div>
                );
              })}
            </div>
          )}

          {/* Shows */}
          <div style={{ padding: '20px' }}>
            <Section title="üî• Trending" shows={trending} onSelect={onSelect} />
            <Section title="Reality TV" shows={reality} onSelect={onSelect} />
          </div>
        </div>
      );
    }

    function Section({ title, shows, onSelect }) {
      return (
        <div style={{ marginBottom: '32px' }}>
          <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '16px' }}>{title}</h2>
          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '12px' }}>
            {shows.map((s, i) => (
              <div key={s.id} onClick={() => onSelect(s)} className="animate-in" style={{ cursor: 'pointer', animationDelay: `${i * 50}ms` }}>
                <div style={{ position: 'relative', paddingBottom: '150%', background: '#2c3440', borderRadius: '12px', overflow: 'hidden', marginBottom: '8px' }}>
                  <img src={s.poster} alt={s.name} style={{ position: 'absolute', width: '100%', height: '100%', objectFit: 'cover' }} />
                  {s.trending && (
                    <div style={{ position: 'absolute', top: '8px', right: '8px', background: 'linear-gradient(135deg, #ff4444, #ff6666)', color: '#fff', padding: '4px 8px', borderRadius: '4px', fontSize: '10px', fontWeight: '700' }}>
                      HOT
                    </div>
                  )}
                </div>
                <div style={{ fontSize: '13px', fontWeight: '600', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{s.name}</div>
                <div style={{ fontSize: '11px', color: '#9ab' }}>{s.year} ‚Ä¢ {s.genre}</div>
              </div>
            ))}
          </div>
        </div>
      );
    }

    // Show View
    function ShowView({ show, onBack }) {
      const eps = EPISODES.filter(e => e.showId === show.id);
      const [selected, setSelected] = useState(null);

      return (
        <div style={{ minHeight: '100vh', background: '#14181c' }}>
          {/* Hero */}
          <div style={{ position: 'relative', height: '280px' }}>
            <img src={show.backdrop} alt={show.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
            <div style={{ position: 'absolute', inset: 0, background: 'linear-gradient(to bottom, rgba(20,24,28,0.3), #14181c)' }} />
            
            <button
              onClick={onBack}
              style={{ position: 'absolute', top: '16px', left: '16px', width: '48px', height: '48px', background: 'rgba(28,35,41,0.9)', backdropFilter: 'blur(10px)', border: 'none', borderRadius: '50%', color: '#fff', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}
            >
              <Icon name="ChevronLeft" size={24} />
            </button>

            <div style={{ position: 'absolute', bottom: '20px', left: '20px', right: '20px' }}>
              <h1 style={{ fontSize: '32px', fontWeight: '700', marginBottom: '8px', textShadow: '0 2px 8px rgba(0,0,0,0.8)' }}>{show.name}</h1>
              <div style={{ display: 'flex', gap: '12px', fontSize: '14px', textShadow: '0 1px 4px rgba(0,0,0,0.8)' }}>
                <span>{show.year}</span>
                <span>‚Ä¢</span>
                <span>{show.genre}</span>
                <span>‚Ä¢</span>
                <div style={{ display: 'flex', gap: '4px' }}>
                  <Icon name="Star" size={14} />
                  <span>{show.rating}</span>
                </div>
              </div>
            </div>
          </div>

          {/* Episodes */}
          <div style={{ padding: '20px' }}>
            <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '16px' }}>Episodes</h2>
            {eps.map((ep, i) => (
              <div key={ep.id} className="card animate-in" onClick={() => setSelected(ep)} style={{ cursor: 'pointer', animationDelay: `${i * 50}ms` }}>
                <div style={{ display: 'flex', gap: '16px' }}>
                  <img src={ep.image} alt={ep.name} style={{ width: '120px', height: '68px', borderRadius: '8px', objectFit: 'cover' }} />
                  <div style={{ flex: 1 }}>
                    <div style={{ fontSize: '11px', color: '#9ab', marginBottom: '4px' }}>S{ep.season}E{ep.episode}</div>
                    <div style={{ fontSize: '16px', fontWeight: '600', marginBottom: '4px' }}>{ep.name}</div>
                    <div style={{ fontSize: '12px', color: '#9ab' }}>{ep.date} ‚Ä¢ ‚≠ê {ep.rating}</div>
                  </div>
                </div>
              </div>
            ))}
          </div>

          {selected && <EpisodeModal ep={selected} show={show} onClose={() => setSelected(null)} />}
        </div>
      );
    }

    // Episode Modal
    function EpisodeModal({ ep, show, onClose }) {
      const [rating, setRating] = useState(storage.ratings[ep.id] || 0);
      const [watching, setWatching] = useState(false);
      const [showComposer, setShowComposer] = useState(false);
      const [showDiscussion, setShowDiscussion] = useState(false);

      const episodeTakes = HOT_TAKES.filter(t => t.episodeId === ep.id);

      function rate(r) {
        setRating(r);
        storage.ratings[ep.id] = r;
      }

      return (
        <>
          <div className="overlay" onClick={onClose} />
          <div className="bottom-sheet">
            <div className="sheet-handle" />
            
            <div style={{ padding: '0 20px 32px' }}>
              <div style={{ display: 'flex', gap: '16px', marginBottom: '20px' }}>
                <img src={ep.image} alt={ep.name} style={{ width: '120px', height: '68px', borderRadius: '12px', objectFit: 'cover' }} />
                <div style={{ flex: 1 }}>
                  <div style={{ fontSize: '13px', color: '#ff8000', fontWeight: '600', marginBottom: '4px' }}>{show.name}</div>
                  <div style={{ fontSize: '18px', fontWeight: '600', marginBottom: '4px' }}>{ep.name}</div>
                  <div style={{ fontSize: '13px', color: '#9ab' }}>S{ep.season}E{ep.episode}</div>
                </div>
              </div>

              <div style={{ fontSize: '14px', color: '#9ab', lineHeight: '1.6', marginBottom: '20px' }}>{ep.desc}</div>

              {/* Rating */}
              <div style={{ marginBottom: '16px' }}>
                <div style={{ fontSize: '15px', fontWeight: '600', marginBottom: '12px' }}>Rate this episode</div>
                <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap' }}>
                  {[0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5].map(r => (
                    <button
                      key={r}
                      onClick={() => rate(r)}
                      style={{
                        flex: '1 0 calc(20% - 6px)',
                        minHeight: '44px',
                        background: rating >= r ? 'linear-gradient(135deg, #ff8000, #ff6000)' : '#2c3440',
                        border: 'none',
                        borderRadius: '8px',
                        color: rating >= r ? '#14181c' : '#9ab',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer'
                      }}
                    >
                      {r}
                    </button>
                  ))}
                </div>
              </div>

              {/* Actions */}
              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px', marginBottom: '16px' }}>
                <button
                  onClick={() => setWatching(!watching)}
                  style={{
                    minHeight: '56px',
                    background: watching ? 'rgba(255,68,68,0.1)' : 'linear-gradient(135deg, #ff8000, #ff6000)',
                    border: watching ? '2px solid #ff4444' : 'none',
                    borderRadius: '12px',
                    color: watching ? '#ff4444' : '#14181c',
                    fontSize: '15px',
                    fontWeight: '700',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    gap: '6px'
                  }}
                >
                  {watching && <span className="pulse" style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#ff4444' }} />}
                  {watching ? 'Watching' : 'Watch'}
                </button>

                <button
                  onClick={() => setShowComposer(true)}
                  style={{
                    minHeight: '56px',
                    background: '#2c3440',
                    border: 'none',
                    borderRadius: '12px',
                    color: '#fff',
                    fontSize: '15px',
                    fontWeight: '700',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    gap: '8px'
                  }}
                >
                  üî• Post Hot Take
                </button>
              </div>

              {/* Discussion */}
              {episodeTakes.length > 0 && (
                <div>
                  <button
                    onClick={() => setShowDiscussion(!showDiscussion)}
                    style={{
                      width: '100%',
                      padding: '16px',
                      background: '#14181c',
                      border: 'none',
                      borderRadius: '12px',
                      color: '#fff',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: 'pointer',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'space-between'
                    }}
                  >
                    <span>üí¨ {episodeTakes.length} Hot Take{episodeTakes.length !== 1 ? 's' : ''}</span>
                    <span style={{ fontSize: '12px', color: '#ff8000' }}>
                      {showDiscussion ? 'Hide' : 'View'}
                    </span>
                  </button>

                  {showDiscussion && (
                    <div style={{ marginTop: '12px', maxHeight: '300px', overflowY: 'auto' }}>
                      {episodeTakes.map(take => {
                        const user = Object.values(USERS).find(u => u.id === take.userId);
                        return (
                          <div key={take.id} style={{ padding: '12px', background: '#14181c', borderRadius: '8px', marginBottom: '8px' }}>
                            <div style={{ display: 'flex', gap: '8px', marginBottom: '8px' }}>
                              <div style={{ width: '32px', height: '32px', borderRadius: '50%', background: 'linear-gradient(135deg, #ff8000, #ff6000)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '14px', fontWeight: '700', color: '#14181c' }}>
                                {user.username[0].toUpperCase()}
                              </div>
                              <div>
                                <div style={{ fontSize: '14px', fontWeight: '600' }}>{user.username}</div>
                                <div style={{ fontSize: '11px', color: '#9ab' }}>{take.time}</div>
                              </div>
                              {take.isLive && (
                                <div className="pulse" style={{ marginLeft: 'auto', padding: '4px 8px', background: 'rgba(255,68,68,0.1)', border: '1px solid #ff4444', borderRadius: '8px', fontSize: '10px', fontWeight: '700', color: '#ff4444' }}>
                                  üî¥ LIVE
                                </div>
                              )}
                            </div>
                            <div style={{ fontSize: '14px', lineHeight: '1.5' }}>{take.content}</div>
                          </div>
                        );
                      })}
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>

          {showComposer && <EpisodeComposer ep={ep} show={show} onClose={() => setShowComposer(false)} />}
        </>
      );
    }

    // Episode-Specific Composer
    function EpisodeComposer({ ep, show, onClose }) {
      const [text, setText] = useState('');
      const max = 280;

      return (
        <>
          <div className="overlay" onClick={onClose} style={{ zIndex: 1001 }} />
          <div className="bottom-sheet" style={{ zIndex: 1002 }}>
            <div className="sheet-handle" />
            
            <div style={{ padding: '0 20px 32px' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <h2 style={{ fontSize: '20px', fontWeight: '700' }}>Post Hot Take</h2>
                <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#9ab', cursor: 'pointer', padding: '8px' }}>
                  <Icon name="X" size={24} />
                </button>
              </div>

              {/* Episode Context */}
              <div style={{ padding: '12px', background: '#14181c', borderRadius: '8px', marginBottom: '16px' }}>
                <div style={{ fontSize: '13px', color: '#ff8000', fontWeight: '600', marginBottom: '4px' }}>{show.name}</div>
                <div style={{ fontSize: '15px', fontWeight: '600' }}>S{ep.season}E{ep.episode}: {ep.name}</div>
              </div>

              <textarea
                value={text}
                onChange={(e) => setText(e.target.value.slice(0, max))}
                placeholder="OMG this episode üî•"
                autoFocus
                style={{ width: '100%', minHeight: '120px', background: '#14181c', border: '1px solid #456', borderRadius: '12px', padding: '16px', color: '#fff', fontSize: '16px', resize: 'vertical', outline: 'none', marginBottom: '12px', fontFamily: 'inherit' }}
              />

              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <span style={{ fontSize: '14px', color: text.length > 250 ? '#ff4444' : '#9ab' }}>{text.length}/{max}</span>
              </div>

              <button
                disabled={!text.trim()}
                style={{
                  width: '100%',
                  minHeight: '56px',
                  background: text.trim() ? 'linear-gradient(135deg, #ff8000, #ff6000)' : '#456',
                  border: 'none',
                  borderRadius: '16px',
                  color: text.trim() ? '#14181c' : '#9ab',
                  fontSize: '16px',
                  fontWeight: '700',
                  cursor: text.trim() ? 'pointer' : 'not-allowed'
                }}
              >
                Post
              </button>
            </div>
          </div>
        </>
      );
    }

    // Hot Takes
    function HotTakes({ onSelect, onCompose }) {
      return (
        <div style={{ minHeight: '100vh', background: '#14181c' }}>
          <div style={{ position: 'sticky', top: 0, background: '#14181c', borderBottom: '1px solid #2c3440', padding: '16px 20px', zIndex: 50 }}>
            <h1 style={{ fontSize: '28px', fontWeight: '700', display: 'flex', alignItems: 'center', gap: '12px' }}>
              <Icon name="Flame" size={28} />
              Hot Takes
            </h1>
          </div>

          <div style={{ padding: '16px' }}>
            {HOT_TAKES.map((take, i) => {
              const user = Object.values(USERS).find(u => u.id === take.userId);
              const episode = EPISODES.find(e => e.id === take.episodeId);
              const show = episode ? Object.values(SHOWS).find(s => s.id === episode.showId) : null;

              return (
                <div key={take.id} className="card animate-in" style={{ animationDelay: `${i * 50}ms` }}>
                  <div style={{ display: 'flex', gap: '12px', marginBottom: '12px' }}>
                    <div style={{ width: '40px', height: '40px', borderRadius: '50%', background: 'linear-gradient(135deg, #ff8000, #ff6000)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '16px', fontWeight: '700', color: '#14181c' }}>
                      {user.username[0].toUpperCase()}
                    </div>
                    <div style={{ flex: 1 }}>
                      <div style={{ fontSize: '15px', fontWeight: '600' }}>{user.username}</div>
                      <div style={{ fontSize: '12px', color: '#9ab' }}>{take.time}</div>
                    </div>
                    {take.isLive && (
                      <div className="pulse" style={{ padding: '6px 12px', background: 'rgba(255,68,68,0.1)', border: '1px solid #ff4444', borderRadius: '12px', fontSize: '11px', fontWeight: '700', color: '#ff4444' }}>
                        üî¥ LIVE
                      </div>
                    )}
                  </div>

                  {show && episode && (
                    <div
                      onClick={() => onSelect(show)}
                      style={{ padding: '10px 12px', background: '#14181c', borderRadius: '8px', marginBottom: '12px', cursor: 'pointer' }}
                    >
                      <span style={{ fontSize: '14px', color: '#ff8000', fontWeight: '600' }}>{show.name}</span>
                      <span style={{ fontSize: '13px', color: '#9ab', marginLeft: '8px' }}>S{episode.season}E{episode.episode}</span>
                    </div>
                  )}

                  <div style={{ fontSize: '15px', lineHeight: '1.5', marginBottom: '12px' }}>{take.content}</div>

                  <div style={{ display: 'flex', gap: '16px' }}>
                    <button style={{ background: 'none', border: 'none', color: '#9ab', cursor: 'pointer', padding: '8px', fontSize: '14px' }}>üî• {take.reactions.fire || 0}</button>
                    <button style={{ background: 'none', border: 'none', color: '#9ab', cursor: 'pointer', padding: '8px', fontSize: '14px' }}>üíÄ {take.reactions.skull || 0}</button>
                  </div>
                </div>
              );
            })}
          </div>

          <button className="fab" onClick={onCompose}>
            <Icon name="Plus" size={28} />
          </button>
        </div>
      );
    }

    // Composer
    function Composer({ onClose }) {
      const [text, setText] = useState('');
      const max = 280;

      return (
        <>
          <div className="overlay" onClick={onClose} />
          <div className="bottom-sheet" style={{ maxHeight: '80vh' }}>
            <div className="sheet-handle" />
            
            <div style={{ padding: '0 20px 32px' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
                <h2 style={{ fontSize: '20px', fontWeight: '700' }}>Post Hot Take</h2>
                <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#9ab', cursor: 'pointer', padding: '8px' }}>
                  <Icon name="X" size={24} />
                </button>
              </div>

              <textarea
                value={text}
                onChange={(e) => setText(e.target.value.slice(0, max))}
                placeholder="This episode is WILD üî•"
                autoFocus
                style={{ width: '100%', minHeight: '120px', background: '#14181c', border: '1px solid #456', borderRadius: '12px', padding: '16px', color: '#fff', fontSize: '16px', resize: 'vertical', outline: 'none', marginBottom: '12px', fontFamily: 'inherit' }}
              />

              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                <span style={{ fontSize: '14px', color: text.length > 250 ? '#ff4444' : '#9ab' }}>{text.length}/{max}</span>
              </div>

              <button
                disabled={!text.trim()}
                style={{
                  width: '100%',
                  minHeight: '56px',
                  background: text.trim() ? 'linear-gradient(135deg, #ff8000, #ff6000)' : '#456',
                  border: 'none',
                  borderRadius: '16px',
                  color: text.trim() ? '#14181c' : '#9ab',
                  fontSize: '16px',
                  fontWeight: '700',
                  cursor: text.trim() ? 'pointer' : 'not-allowed'
                }}
              >
                Post
              </button>
            </div>
          </div>
        </>
      );
    }

    // Profile
    function Profile() {
      const user = USERS.current;
      const rated = Object.keys(storage.ratings).length;

      return (
        <div style={{ minHeight: '100vh', background: '#14181c', padding: '20px' }}>
          <div className="card" style={{ marginBottom: '20px' }}>
            <div style={{ display: 'flex', gap: '20px', marginBottom: '20px' }}>
              <div style={{ width: '72px', height: '72px', borderRadius: '50%', background: 'linear-gradient(135deg, #ff8000, #ff6000)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '32px', fontWeight: '700', color: '#14181c' }}>
                T
              </div>
              <div>
                <div style={{ fontSize: '24px', fontWeight: '700', marginBottom: '4px' }}>{user.name}</div>
                <div style={{ fontSize: '14px', color: '#9ab' }}>@{user.username}</div>
              </div>
            </div>

            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '20px', paddingTop: '20px', borderTop: '1px solid #2c3440' }}>
              <div style={{ textAlign: 'center' }}>
                <div style={{ fontSize: '28px', fontWeight: '700', color: '#ff8000', marginBottom: '4px' }}>{rated}</div>
                <div style={{ fontSize: '12px', color: '#9ab' }}>Rated</div>
              </div>
              <div style={{ textAlign: 'center' }}>
                <div style={{ fontSize: '28px', fontWeight: '700', color: '#ff8000', marginBottom: '4px' }}>1</div>
                <div style={{ fontSize: '12px', color: '#9ab' }}>Posts</div>
              </div>
              <div style={{ textAlign: 'center' }}>
                <div style={{ fontSize: '28px', fontWeight: '700', color: '#ff8000', marginBottom: '4px' }}>2</div>
                <div style={{ fontSize: '12px', color: '#9ab' }}>Following</div>
              </div>
            </div>
          </div>

          <div className="card" style={{ textAlign: 'center', padding: '32px' }}>
            <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '12px' }}>üì∫ Episodic Demo</h2>
            <p style={{ fontSize: '14px', color: '#9ab', lineHeight: '1.6' }}>
              Mobile-first TV episode tracker. Rate episodes, post hot takes, see who's watching now. Letterboxd for TV!
            </p>
          </div>
        </div>
      );
    }

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>