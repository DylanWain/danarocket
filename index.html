<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0A0E13">
  <title>Episodic</title>
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* ============================================================================ */
    /* EPISODIC PREMIUM - REVENGE BUILD */
    /* 10 years of Letterboxd mistakes, fixed. */
    /* Mobile-first. Premium materials. Perfect spacing. Smooth as butter. */
    /* ============================================================================ */
    
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    :root {
      /* Premium Color System (not generic orange) */
      --bg-primary: #0A0E13;
      --bg-elevated: #12171E;
      --bg-card: #1A1F28;
      --bg-hover: #232930;
      
      /* Sophisticated gradients */
      --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
      --gradient-glow: linear-gradient(135deg, rgba(255,107,53,0.1) 0%, rgba(247,147,30,0.1) 100%);
      
      /* Text hierarchy */
      --text-primary: #FFFFFF;
      --text-secondary: #A0AEC0;
      --text-tertiary: #718096;
      
      /* Accents */
      --accent-primary: #FF6B35;
      --accent-secondary: #F7931E;
      --accent-success: #48BB78;
      --accent-error: #F56565;
      --accent-live: #FC5C65;
      
      /* Borders & Dividers */
      --border-subtle: rgba(255,255,255,0.06);
      --border-medium: rgba(255,255,255,0.1);
      --border-strong: rgba(255,255,255,0.15);
      
      /* Shadows (premium depth) */
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.2);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.3);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.4);
      --shadow-xl: 0 16px 48px rgba(0,0,0,0.5);
      --shadow-glow: 0 0 24px rgba(255,107,53,0.3);
      
      /* Spacing (golden ratio based) */
      --space-2: 2px;
      --space-4: 4px;
      --space-6: 6px;
      --space-8: 8px;
      --space-12: 12px;
      --space-16: 16px;
      --space-20: 20px;
      --space-24: 24px;
      --space-32: 32px;
      --space-40: 40px;
      --space-48: 48px;
      
      /* Border radius (consistent system) */
      --radius-xs: 6px;
      --radius-sm: 10px;
      --radius-md: 14px;
      --radius-lg: 18px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      
      /* Typography scale */
      --text-xs: 11px;
      --text-sm: 13px;
      --text-base: 15px;
      --text-lg: 17px;
      --text-xl: 20px;
      --text-2xl: 24px;
      --text-3xl: 32px;
      --text-4xl: 40px;
      
      /* Z-index layers */
      --z-base: 1;
      --z-elevated: 10;
      --z-sticky: 50;
      --z-overlay: 900;
      --z-modal: 1000;
      --z-toast: 2000;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: var(--bg-primary);
      color: var(--text-primary);
      overflow-x: hidden;
      font-feature-settings: 'ss01', 'ss02', 'cv02', 'cv03', 'cv04';
    }
    
    #root {
      min-height: 100vh;
      padding-bottom: calc(72px + env(safe-area-inset-bottom));
    }

    /* Smooth scrolling everywhere */
    * {
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }

    /* Hide scrollbars but keep functionality */
    ::-webkit-scrollbar { display: none; }
    
    /* Selection color */
    ::selection {
      background: var(--accent-primary);
      color: white;
    }

    /* ============================================================================ */
    /* PREMIUM ANIMATIONS (60fps, purposeful) */
    /* ============================================================================ */
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes slideInFromBottom {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.8;
        transform: scale(0.98);
      }
    }

    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }

    @keyframes glow {
      0%, 100% {
        box-shadow: 0 0 20px rgba(255,107,53,0.3);
      }
      50% {
        box-shadow: 0 0 30px rgba(255,107,53,0.5);
      }
    }

    /* Apply animations */
    .animate-in { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    .animate-fade { animation: fadeIn 0.3s ease-out; }
    .animate-scale { animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
    .pulse { animation: pulse 2s infinite; }

    /* ============================================================================ */
    /* PREMIUM COMPONENTS */
    /* ============================================================================ */

    /* Glass Morphism Card */
    .glass-card {
      background: rgba(26, 31, 40, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-md);
    }

    /* Premium Button */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-8);
      padding: var(--space-16) var(--space-24);
      border: none;
      border-radius: var(--radius-md);
      font-size: var(--text-base);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
      min-height: 48px;
      font-family: inherit;
    }

    .btn-primary {
      background: var(--gradient-primary);
      color: white;
      box-shadow: var(--shadow-sm);
    }

    .btn-primary:active {
      transform: scale(0.97);
      box-shadow: var(--shadow-lg);
    }

    .btn-secondary {
      background: var(--bg-elevated);
      color: var(--text-primary);
      border: 1px solid var(--border-medium);
    }

    .btn-secondary:active {
      background: var(--bg-hover);
      transform: scale(0.98);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
    }

    .btn-ghost:active {
      color: var(--text-primary);
      transform: scale(0.95);
    }

    /* Input Fields (premium) */
    .input-field {
      width: 100%;
      padding: var(--space-16) var(--space-20);
      background: var(--bg-elevated);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      font-size: var(--text-base);
      font-family: inherit;
      outline: none;
      transition: all 0.2s;
    }

    .input-field:focus {
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px rgba(255,107,53,0.1);
    }

    .input-field::placeholder {
      color: var(--text-tertiary);
    }

    /* Premium Card */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--space-20);
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .card-interactive {
      cursor: pointer;
    }

    .card-interactive:active {
      transform: scale(0.98);
      background: var(--bg-hover);
    }

    /* Bottom Sheet (native feel) */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: var(--z-overlay);
      animation: fadeIn 0.2s ease-out;
    }

    .bottom-sheet {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-elevated);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      z-index: var(--z-modal);
      animation: slideInFromBottom 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-xl);
      border-top: 1px solid var(--border-medium);
    }

    .sheet-handle {
      width: 36px;
      height: 4px;
      background: var(--border-strong);
      border-radius: var(--radius-full);
      margin: var(--space-12) auto;
    }

    /* Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(18, 23, 30, 0.95);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-top: 1px solid var(--border-subtle);
      display: flex;
      z-index: var(--z-sticky);
      padding-bottom: env(safe-area-inset-bottom);
      box-shadow: 0 -4px 24px rgba(0,0,0,0.3);
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-4);
      padding: var(--space-12);
      background: none;
      border: none;
      color: var(--text-tertiary);
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .nav-item.active {
      color: var(--accent-primary);
    }

    .nav-item.active::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 32px;
      height: 2px;
      background: var(--gradient-primary);
      border-radius: 0 0 2px 2px;
    }

    .nav-item:active {
      transform: scale(0.95);
    }

    /* Story Bubbles (Instagram quality) */
    .stories-container {
      display: flex;
      gap: var(--space-16);
      padding: var(--space-20) var(--space-24);
      overflow-x: auto;
      scroll-snap-type: x mandatory;
    }

    .story-item {
      flex-shrink: 0;
      text-align: center;
      scroll-snap-align: start;
    }

    .story-ring {
      width: 72px;
      height: 72px;
      padding: 3px;
      background: var(--gradient-primary);
      border-radius: var(--radius-full);
      margin-bottom: var(--space-8);
      box-shadow: var(--shadow-glow);
    }

    .story-inner {
      width: 100%;
      height: 100%;
      background: var(--bg-primary);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--text-2xl);
      font-weight: 700;
      color: var(--accent-primary);
      border: 2px solid var(--bg-primary);
    }

    /* Badge */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-6);
      padding: var(--space-6) var(--space-12);
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-live {
      background: rgba(252,92,101,0.15);
      color: var(--accent-live);
      border: 1px solid rgba(252,92,101,0.3);
      animation: pulse 2s infinite;
    }

    .badge-hot {
      background: var(--gradient-glow);
      color: var(--accent-primary);
      border: 1px solid rgba(255,107,53,0.3);
    }

    /* Genre Pills */
    .genre-pill {
      padding: var(--space-8) var(--space-16);
      background: var(--bg-elevated);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-full);
      font-size: var(--text-sm);
      font-weight: 600;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .genre-pill.active {
      background: var(--gradient-primary);
      color: white;
      border-color: transparent;
      box-shadow: var(--shadow-glow);
    }

    .genre-pill:active {
      transform: scale(0.95);
    }

    /* Avatar (premium) */
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-full);
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: white;
      flex-shrink: 0;
      box-shadow: var(--shadow-sm);
    }

    .avatar-lg {
      width: 80px;
      height: 80px;
      font-size: var(--text-3xl);
    }

    /* FAB (Floating Action Button) */
    .fab {
      position: fixed;
      bottom: calc(88px + env(safe-area-inset-bottom));
      right: var(--space-20);
      width: 56px;
      height: 56px;
      background: var(--gradient-primary);
      border: none;
      border-radius: var(--radius-full);
      color: white;
      box-shadow: var(--shadow-lg), 0 0 24px rgba(255,107,53,0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: var(--z-elevated);
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .fab:active {
      transform: scale(0.9) rotate(90deg);
    }

    /* Skeleton Loader */
    .skeleton {
      background: linear-gradient(
        90deg,
        var(--bg-card) 0%,
        var(--bg-hover) 50%,
        var(--bg-card) 100%
      );
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: var(--radius-sm);
    }

    /* Notification Dot */
    .notification-dot {
      position: absolute;
      top: 0;
      right: 0;
      width: 8px;
      height: 8px;
      background: var(--accent-error);
      border: 2px solid var(--bg-elevated);
      border-radius: var(--radius-full);
      box-shadow: 0 0 8px var(--accent-error);
    }

    /* Icons */
    .icon {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    /* Desktop responsive */
    @media (min-width: 768px) {
      #root {
        max-width: 480px;
        margin: 0 auto;
        box-shadow: 0 0 80px rgba(0,0,0,0.8);
      }
    }

    /* Utility Classes */
    .text-gradient {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .truncate {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // ============================================================================
    // PREMIUM EPISODIC - DATA LAYER
    // ============================================================================

    const SHOWS = {
      loveIsland: {
        id: 1,
        name: 'Love Island',
        year: '2024',
        poster: 'https://image.tmdb.org/t/p/w500/h9f3vNGZGDRqOw26uwDMYhSLZ01.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/rCqYXh6ztQLpC1BKW3KF0v3DXNP.jpg',
        genre: 'Reality',
        rating: 7.2,
        trending: true
      },
      bachelor: {
        id: 2,
        name: 'The Bachelor',
        year: '2024',
        poster: 'https://image.tmdb.org/t/p/w500/mKadW8gXqVdg01IJYkMHNrzoZ3a.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/jKOuF93E4sjkCYKYMxcjHNKcMXJ.jpg',
        genre: 'Reality',
        rating: 6.8,
        trending: true
      },
      survivor: {
        id: 3,
        name: 'Survivor',
        year: '2024',
        poster: 'https://image.tmdb.org/t/p/w500/ddYkNcvJJ1FJFy3SaZfqTXExkPc.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/zcMz1BKuP6kZlOsF3Ckd4EAF2jg.jpg',
        genre: 'Reality',
        rating: 7.6,
        trending: true
      },
      snl: {
        id: 4,
        name: 'Saturday Night Live',
        year: '1975',
        poster: 'https://image.tmdb.org/t/p/w500/sHGuKFjIBisPk8cvtCZTDVktYfs.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/iM8kss04YCaGPXJqBkS4rHZbJTW.jpg',
        genre: 'Comedy',
        rating: 7.1,
        trending: false
      },
      housewives: {
        id: 5,
        name: 'Real Housewives',
        year: '2010',
        poster: 'https://image.tmdb.org/t/p/w500/jCWYWV0TquevYfiJ6pJkGq3Qzhe.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/1TS0T3WEH9bJWCBYV3DykNqhXTi.jpg',
        genre: 'Reality',
        rating: 7.5,
        trending: false
      },
      breakingBad: {
        id: 6,
        name: 'Breaking Bad',
        year: '2008',
        poster: 'https://image.tmdb.org/t/p/w500/ztkUQFLlC19CCMYHW9o1zWhJRNq.jpg',
        backdrop: 'https://image.tmdb.org/t/p/w1280/tsRy63Mu5cu8etL1X7ZLyf7UP1M.jpg',
        genre: 'Drama',
        rating: 8.9,
        trending: false
      }
    };

    const EPISODES = [
      { id: 1, showId: 1, season: 6, episode: 1, name: 'First Coupling', image: 'https://image.tmdb.org/t/p/w500/h9f3vNGZGDRqOw26uwDMYhSLZ01.jpg', date: 'Jan 13', rating: 7.8, desc: 'Islanders arrive and couple up for first time.' },
      { id: 2, showId: 1, season: 6, episode: 2, name: 'Recoupling Chaos', image: 'https://image.tmdb.org/t/p/w500/rCqYXh6ztQLpC1BKW3KF0v3DXNP.jpg', date: 'Jan 14', rating: 8.2, desc: 'First recoupling brings unexpected twists.' },
      { id: 3, showId: 1, season: 6, episode: 3, name: 'Bombshell Entry', image: 'https://image.tmdb.org/t/p/w500/h9f3vNGZGDRqOw26uwDMYhSLZ01.jpg', date: 'Jan 15', rating: 8.5, desc: 'New bombshell shakes up relationships.' },
      { id: 4, showId: 2, season: 28, episode: 1, name: 'Week 1', image: 'https://image.tmdb.org/t/p/w500/jKOuF93E4sjkCYKYMxcjHNKcMXJ.jpg', date: 'Jan 27', rating: 7.6, desc: 'Joey meets 32 women.' },
      { id: 5, showId: 3, season: 46, episode: 1, name: 'Hot Mess Express', image: 'https://image.tmdb.org/t/p/w500/zcMz1BKuP6kZlOsF3Ckd4EAF2jg.jpg', date: 'Feb 26', rating: 8.3, desc: 'Eighteen castaways begin battle.' },
      { id: 6, showId: 4, season: 50, episode: 2, name: 'Nate Bargatze', image: 'https://image.tmdb.org/t/p/w500/3REhPBPbNnIdHSBsqFxSe5TJNHd.jpg', date: 'Oct 5', rating: 8.9, desc: 'Nate hosts with Coldplay.' },
      { id: 7, showId: 4, season: 50, episode: 5, name: 'John Mulaney', image: 'https://image.tmdb.org/t/p/w500/5bQ5TynqtB6yIrxHx8mYFmBiDfC.jpg', date: 'Nov 2', rating: 9.5, desc: 'John returns for sixth time.' }
    ];

    const USERS = {
      current: { id: '1', username: 'tvlover', name: 'TV Lover' },
      user2: { id: '2', username: 'realityfan', name: 'Reality Fan' },
      user3: { id: '3', username: 'snlstan', name: 'SNL Stan' }
    };

    const HOT_TAKES = [
      { id: 1, userId: '2', episodeId: 3, content: 'OMG THAT BOMBSHELL ENTRANCE ðŸ˜± This is already the best season', time: '15m ago', reactions: { fire: 23, skull: 5 }, isLive: false },
      { id: 2, userId: '1', episodeId: 7, content: 'John Mulaney is a GENERATIONAL talent ðŸ”¥ Best SNL host in years', time: '2h ago', reactions: { fire: 45 }, isLive: false },
      { id: 3, userId: '3', episodeId: 4, content: 'ðŸ”´ WATCHING NOW: This rose ceremony taking FOREVER ðŸŒ¹', time: '3m ago', reactions: { laugh: 8 }, isLive: true },
      { id: 4, userId: '2', episodeId: 6, content: 'Washington\'s Dream sketch >>>>> Best SNL moment this season ðŸ’€', time: '5h ago', reactions: { fire: 34 }, isLive: false }
    ];

    const WATCHING_NOW = [
      { userId: '2', episodeId: 2 },
      { userId: '3', episodeId: 4 }
    ];

    // Your activity (Instagram-style notifications)
    const YOUR_ACTIVITY = [
      { id: 1, type: 'like', userId: '2', episodeId: 7, content: 'liked your hot take', time: '5m ago' },
      { id: 2, type: 'like', userId: '3', episodeId: 7, content: 'liked your hot take', time: '12m ago' },
      { id: 3, type: 'comment', userId: '2', episodeId: 3, content: 'commented on your rating', time: '1h ago' }
    ];

    const storage = {
      ratings: {},
      watchingNow: [],
      myTakes: []
    };

    // Icons
    const Icon = ({ name, size = 24 }) => {
      const icons = {
        Home: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>,
        Flame: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
        Bell: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>,
        User: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
        Search: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>,
        Star: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
        ChevronLeft: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>,
        Plus: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
        X: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
        Heart: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>,
        MessageCircle: <svg className="icon" width={size} height={size} viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
      };
      return icons[name];
    };

    // ============================================================================
    // MAIN APP
    // ============================================================================
    function App() {
      const [tab, setTab] = useState('home');
      const [show, setShow] = useState(null);
      const [composer, setComposer] = useState(false);

      return (
        <div>
          {show ? (
            <ShowView show={show} onBack={() => setShow(null)} />
          ) : (
            <>
              {tab === 'home' && <Home onSelect={setShow} />}
              {tab === 'hot-takes' && <HotTakes onSelect={setShow} onCompose={() => setComposer(true)} />}
              {tab === 'activity' && <Activity onSelect={setShow} />}
              {tab === 'profile' && <Profile />}
            </>
          )}
          
          {!show && <BottomNav tab={tab} onChange={setTab} />}
          {composer && <Composer onClose={() => setComposer(false)} />}
        </div>
      );
    }

    // ============================================================================
    // BOTTOM NAV (Premium)
    // ============================================================================
    function BottomNav({ tab, onChange }) {
      const hasNotifications = YOUR_ACTIVITY.some(a => a.time.includes('m ago'));
      
      return (
        <nav className="bottom-nav">
          {[
            { id: 'home', icon: 'Home', label: 'Home' },
            { id: 'hot-takes', icon: 'Flame', label: 'Hot Takes' },
            { id: 'activity', icon: 'Bell', label: 'Activity', badge: hasNotifications },
            { id: 'profile', icon: 'User', label: 'You' }
          ].map(item => (
            <button
              key={item.id}
              className={`nav-item ${tab === item.id ? 'active' : ''}`}
              onClick={() => onChange(item.id)}
            >
              <div style={{ position: 'relative' }}>
                <Icon name={item.icon} size={24} />
                {item.badge && <span className="notification-dot" />}
              </div>
              <span style={{ fontSize: 'var(--text-xs)', fontWeight: '600' }}>{item.label}</span>
            </button>
          ))}
        </nav>
      );
    }

    // ============================================================================
    // HOME VIEW (Premium Discovery)
    // ============================================================================
    function Home({ onSelect }) {
      const [search, setSearch] = useState('');
      const [results, setResults] = useState([]);
      const [genre, setGenre] = useState('all');

      const trending = useMemo(() => Object.values(SHOWS).filter(s => s.trending), []);
      
      const filteredShows = useMemo(() => {
        const all = Object.values(SHOWS);
        if (genre === 'all') return all;
        return all.filter(s => s.genre === genre);
      }, [genre]);

      function handleSearch(q) {
        setSearch(q);
        if (!q.trim()) {
          setResults([]);
          return;
        }
        setResults(Object.values(SHOWS).filter(s => s.name.toLowerCase().includes(q.toLowerCase())));
      }

      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)' }}>
          {/* Premium Header */}
          <div style={{ position: 'sticky', top: 0, background: 'rgba(10,14,19,0.95)', backdropFilter: 'blur(20px)', borderBottom: '1px solid var(--border-subtle)', padding: 'var(--space-20) var(--space-24)', zIndex: 'var(--z-sticky)' }}>
            <h1 className="text-gradient" style={{ fontSize: 'var(--text-4xl)', fontWeight: '800', marginBottom: 'var(--space-16)', letterSpacing: '-0.02em' }}>
              Episodic
            </h1>
            
            <div style={{ position: 'relative' }}>
              <div style={{ position: 'relative' }}>
                <Icon name="Search" size={20} style={{ position: 'absolute', left: 'var(--space-16)', top: '50%', transform: 'translateY(-50%)', color: 'var(--text-tertiary)', pointerEvents: 'none', zIndex: 1 }} />
                <input
                  type="text"
                  placeholder="Search shows..."
                  value={search}
                  onChange={(e) => handleSearch(e.target.value)}
                  className="input-field"
                  style={{ paddingLeft: 'var(--space-48)' }}
                />
              </div>

              {results.length > 0 && (
                <div className="glass-card animate-scale" style={{ position: 'absolute', top: '100%', left: 0, right: 0, marginTop: 'var(--space-8)', zIndex: 100, maxHeight: '400px', overflowY: 'auto', padding: 'var(--space-8)' }}>
                  {results.map((s, i) => (
                    <button
                      key={s.id}
                      onClick={() => { onSelect(s); setResults([]); setSearch(''); }}
                      className="card-interactive animate-in"
                      style={{ width: '100%', display: 'flex', gap: 'var(--space-16)', padding: 'var(--space-12)', background: 'transparent', border: 'none', cursor: 'pointer', textAlign: 'left', borderRadius: 'var(--radius-md)', animationDelay: `${i * 30}ms` }}
                    >
                      <img src={s.poster} alt={s.name} style={{ width: '44px', height: '66px', borderRadius: 'var(--radius-sm)', objectFit: 'cover', boxShadow: 'var(--shadow-sm)' }} />
                      <div style={{ flex: 1 }}>
                        <div style={{ color: 'var(--text-primary)', fontSize: 'var(--text-base)', fontWeight: '600', marginBottom: 'var(--space-4)' }}>{s.name}</div>
                        <div style={{ color: 'var(--text-tertiary)', fontSize: 'var(--text-sm)' }}>{s.year} â€¢ {s.genre}</div>
                      </div>
                    </button>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* Genre Filter Pills */}
          <div style={{ padding: 'var(--space-16) var(--space-24)', display: 'flex', gap: 'var(--space-12)', overflowX: 'auto' }}>
            {['all', 'Reality', 'Comedy', 'Drama'].map(g => (
              <button
                key={g}
                className={`genre-pill ${genre === g ? 'active' : ''}`}
                onClick={() => setGenre(g)}
              >
                {g === 'all' ? 'All Shows' : g}
              </button>
            ))}
          </div>

          {/* Watching Now Stories */}
          {WATCHING_NOW.length > 0 && (
            <div className="stories-container">
              {WATCHING_NOW.map((w, i) => {
                const user = Object.values(USERS).find(u => u.id === w.userId);
                return (
                  <div key={i} className="story-item">
                    <div className="story-ring pulse">
                      <div className="story-inner">{user.username[0].toUpperCase()}</div>
                    </div>
                    <div className="truncate" style={{ fontSize: 'var(--text-xs)', color: 'var(--text-tertiary)', fontWeight: '600', maxWidth: '72px' }}>
                      {user.username}
                    </div>
                  </div>
                );
              })}
            </div>
          )}

          {/* Shows Grid */}
          <div style={{ padding: 'var(--space-24)' }}>
            {trending.length > 0 && genre === 'all' && (
              <ShowSection title="ðŸ”¥ Trending Now" shows={trending} onSelect={onSelect} />
            )}
            <ShowSection title={genre === 'all' ? 'All Shows' : genre} shows={filteredShows} onSelect={onSelect} />
          </div>
        </div>
      );
    }

    function ShowSection({ title, shows, onSelect }) {
      return (
        <div style={{ marginBottom: 'var(--space-40)' }}>
          <h2 style={{ fontSize: 'var(--text-xl)', fontWeight: '700', marginBottom: 'var(--space-20)', color: 'var(--text-primary)' }}>{title}</h2>
          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 'var(--space-16)' }}>
            {shows.map((s, i) => (
              <div key={s.id} onClick={() => onSelect(s)} className="animate-in" style={{ cursor: 'pointer', animationDelay: `${i * 40}ms` }}>
                <div style={{ position: 'relative', paddingBottom: '150%', background: 'var(--bg-card)', borderRadius: 'var(--radius-lg)', overflow: 'hidden', marginBottom: 'var(--space-12)', boxShadow: 'var(--shadow-md)', transition: 'transform 0.2s' }} onMouseDown={(e) => e.currentTarget.style.transform = 'scale(0.95)'} onMouseUp={(e) => e.currentTarget.style.transform = 'scale(1)'} onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}>
                  <img src={s.poster} alt={s.name} style={{ position: 'absolute', width: '100%', height: '100%', objectFit: 'cover' }} />
                  {s.trending && (
                    <div className="badge-hot" style={{ position: 'absolute', top: 'var(--space-8)', right: 'var(--space-8)' }}>
                      HOT
                    </div>
                  )}
                </div>
                <div className="truncate" style={{ fontSize: 'var(--text-sm)', fontWeight: '600', color: 'var(--text-primary)', marginBottom: 'var(--space-4)' }}>{s.name}</div>
                <div style={{ fontSize: 'var(--text-xs)', color: 'var(--text-tertiary)' }}>{s.year} â€¢ {s.genre}</div>
              </div>
            ))}
          </div>
        </div>
      );
    }

    // ============================================================================
    // SHOW VIEW (Premium Episode Browser)
    // ============================================================================
    function ShowView({ show, onBack }) {
      const eps = EPISODES.filter(e => e.showId === show.id);
      const [selected, setSelected] = useState(null);

      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)' }}>
          {/* Premium Hero */}
          <div style={{ position: 'relative', height: '320px' }}>
            <img src={show.backdrop} alt={show.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
            <div style={{ position: 'absolute', inset: 0, background: 'linear-gradient(to bottom, rgba(10,14,19,0.2) 0%, rgba(10,14,19,0.8) 70%, var(--bg-primary) 100%)' }} />
            
            <button
              onClick={onBack}
              className="btn-secondary"
              style={{ position: 'absolute', top: 'var(--space-20)', left: 'var(--space-20)', width: '48px', height: '48px', padding: 0, backdropFilter: 'blur(20px)', WebkitBackdropFilter: 'blur(20px)', background: 'rgba(18,23,30,0.8)' }}
            >
              <Icon name="ChevronLeft" size={24} />
            </button>

            <div style={{ position: 'absolute', bottom: 'var(--space-24)', left: 'var(--space-24)', right: 'var(--space-24)' }}>
              <h1 style={{ fontSize: 'var(--text-4xl)', fontWeight: '800', marginBottom: 'var(--space-12)', textShadow: '0 4px 12px rgba(0,0,0,0.8)', letterSpacing: '-0.02em' }}>{show.name}</h1>
              <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-12)', fontSize: 'var(--text-sm)', fontWeight: '600', textShadow: '0 2px 8px rgba(0,0,0,0.8)' }}>
                <span style={{ color: 'var(--text-secondary)' }}>{show.year}</span>
                <span style={{ color: 'var(--text-tertiary)' }}>â€¢</span>
                <span style={{ color: 'var(--text-secondary)' }}>{show.genre}</span>
                <span style={{ color: 'var(--text-tertiary)' }}>â€¢</span>
                <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-6)' }}>
                  <Icon name="Star" size={16} style={{ color: 'var(--accent-primary)' }} />
                  <span style={{ color: 'var(--accent-primary)' }}>{show.rating}</span>
                </div>
              </div>
            </div>
          </div>

          {/* Episodes */}
          <div style={{ padding: 'var(--space-24)' }}>
            <h2 style={{ fontSize: 'var(--text-xl)', fontWeight: '700', marginBottom: 'var(--space-20)', color: 'var(--text-primary)' }}>Episodes</h2>
            {eps.map((ep, i) => (
              <div
                key={ep.id}
                className="card card-interactive animate-in"
                onClick={() => setSelected(ep)}
                style={{ marginBottom: 'var(--space-16)', animationDelay: `${i * 40}ms` }}
              >
                <div style={{ display: 'flex', gap: 'var(--space-16)' }}>
                  <div style={{ position: 'relative', flexShrink: 0 }}>
                    <img src={ep.image} alt={ep.name} style={{ width: '140px', height: '79px', borderRadius: 'var(--radius-md)', objectFit: 'cover', boxShadow: 'var(--shadow-sm)' }} />
                    <div style={{ position: 'absolute', inset: 0, borderRadius: 'var(--radius-md)', background: 'linear-gradient(to top, rgba(0,0,0,0.4), transparent)' }} />
                  </div>
                  <div style={{ flex: 1, minWidth: 0 }}>
                    <div style={{ fontSize: 'var(--text-xs)', color: 'var(--text-tertiary)', fontWeight: '700', marginBottom: 'var(--space-6)', textTransform: 'uppercase', letterSpacing: '0.5px' }}>S{ep.season}E{ep.episode}</div>
                    <div className="truncate" style={{ fontSize: 'var(--text-base)', fontWeight: '600', color: 'var(--text-primary)', marginBottom: 'var(--space-6)' }}>{ep.name}</div>
                    <div style={{ fontSize: 'var(--text-xs)', color: 'var(--text-tertiary)', display: 'flex', alignItems: 'center', gap: 'var(--space-12)' }}>
                      <span>{ep.date}</span>
                      <span>â€¢</span>
                      <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-4)' }}>
                        <Icon name="Star" size={12} style={{ color: 'var(--accent-primary)' }} />
                        <span style={{ color: 'var(--accent-primary)', fontWeight: '600' }}>{ep.rating}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>

          {selected && <EpisodeModal ep={selected} show={show} onClose={() => setSelected(null)} />}
        </div>
      );
    }

    // ============================================================================
    // EPISODE MODAL (Premium Bottom Sheet)
    // ============================================================================
    function EpisodeModal({ ep, show, onClose }) {
      const [rating, setRating] = useState(storage.ratings[ep.id] || 0);
      const [watching, setWatching] = useState(false);
      const [showComposer, setShowComposer] = useState(false);
      const [showDiscussion, setShowDiscussion] = useState(false);

      const episodeTakes = HOT_TAKES.filter(t => t.episodeId === ep.id);

      function rate(r) {
        setRating(r);
        storage.ratings[ep.id] = r;
      }

      return (
        <>
          <div className="overlay" onClick={onClose} />
          <div className="bottom-sheet">
            <div className="sheet-handle" />
            
            <div style={{ padding: '0 var(--space-24) var(--space-40)' }}>
              {/* Episode Header */}
              <div style={{ display: 'flex', gap: 'var(--space-16)', marginBottom: 'var(--space-24)' }}>
                <img src={ep.image} alt={ep.name} style={{ width: '120px', height: '68px', borderRadius: 'var(--radius-md)', objectFit: 'cover', boxShadow: 'var(--shadow-md)' }} />
                <div style={{ flex: 1, minWidth: 0 }}>
                  <div style={{ fontSize: 'var(--text-sm)', color: 'var(--accent-primary)', fontWeight: '700', marginBottom: 'var(--space-6)' }}>{show.name}</div>
                  <div className="line-clamp-2" style={{ fontSize: 'var(--text-lg)', fontWeight: '700', color: 'var(--text-primary)', marginBottom: 'var(--space-6)' }}>{ep.name}</div>
                  <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)', fontWeight: '600' }}>Season {ep.season}, Episode {ep.episode}</div>
                </div>
              </div>

              <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-secondary)', lineHeight: '1.6', marginBottom: 'var(--space-24)' }}>{ep.desc}</div>

              {/* Rating */}
              <div style={{ marginBottom: 'var(--space-20)' }}>
                <div style={{ fontSize: 'var(--text-base)', fontWeight: '600', marginBottom: 'var(--space-16)', color: 'var(--text-primary)' }}>Rate this episode</div>
                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(5, 1fr)', gap: 'var(--space-8)' }}>
                  {[0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5].map(r => (
                    <button
                      key={r}
                      onClick={() => rate(r)}
                      className="btn"
                      style={{
                        minHeight: '48px',
                        padding: 'var(--space-8)',
                        background: rating >= r ? 'var(--gradient-primary)' : 'var(--bg-elevated)',
                        border: `1px solid ${rating >= r ? 'transparent' : 'var(--border-medium)'}`,
                        color: rating >= r ? 'white' : 'var(--text-secondary)',
                        fontSize: 'var(--text-sm)',
                        fontWeight: '700',
                        boxShadow: rating >= r ? 'var(--shadow-glow)' : 'none'
                      }}
                    >
                      {r}
                    </button>
                  ))}
                </div>
              </div>

              {/* Actions */}
              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-12)', marginBottom: 'var(--space-20)' }}>
                <button
                  onClick={() => setWatching(!watching)}
                  className="btn"
                  style={{
                    background: watching ? 'rgba(252,92,101,0.15)' : 'var(--gradient-primary)',
                    border: watching ? '1px solid var(--accent-live)' : 'none',
                    color: watching ? 'var(--accent-live)' : 'white',
                    boxShadow: watching ? 'none' : 'var(--shadow-glow)'
                  }}
                >
                  {watching && <span className="pulse" style={{ width: '8px', height: '8px', borderRadius: 'var(--radius-full)', background: 'var(--accent-live)' }} />}
                  {watching ? 'Watching' : 'Watch'}
                </button>

                <button
                  onClick={() => setShowComposer(true)}
                  className="btn-secondary"
                >
                  ðŸ”¥ Hot Take
                </button>
              </div>

              {/* Discussion */}
              {episodeTakes.length > 0 && (
                <div>
                  <button
                    onClick={() => setShowDiscussion(!showDiscussion)}
                    className="btn-secondary"
                    style={{ width: '100%', justifyContent: 'space-between' }}
                  >
                    <span style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-8)' }}>
                      <Icon name="MessageCircle" size={20} />
                      <span>{episodeTakes.length} Hot Take{episodeTakes.length !== 1 ? 's' : ''}</span>
                    </span>
                    <span style={{ fontSize: 'var(--text-sm)', color: 'var(--accent-primary)' }}>
                      {showDiscussion ? 'Hide' : 'View'}
                    </span>
                  </button>

                  {showDiscussion && (
                    <div style={{ marginTop: 'var(--space-16)', maxHeight: '300px', overflowY: 'auto', display: 'flex', flexDirection: 'column', gap: 'var(--space-12)' }}>
                      {episodeTakes.map(take => {
                        const user = Object.values(USERS).find(u => u.id === take.userId);
                        return (
                          <div key={take.id} className="card" style={{ padding: 'var(--space-16)' }}>
                            <div style={{ display: 'flex', gap: 'var(--space-12)', marginBottom: 'var(--space-12)' }}>
                              <div className="avatar" style={{ width: '32px', height: '32px', fontSize: 'var(--text-sm)' }}>
                                {user.username[0].toUpperCase()}
                              </div>
                              <div style={{ flex: 1 }}>
                                <div style={{ fontSize: 'var(--text-sm)', fontWeight: '600', color: 'var(--text-primary)' }}>{user.username}</div>
                                <div style={{ fontSize: 'var(--text-xs)', color: 'var(--text-tertiary)' }}>{take.time}</div>
                              </div>
                              {take.isLive && <div className="badge-live">LIVE</div>}
                            </div>
                            <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-primary)', lineHeight: '1.5' }}>{take.content}</div>
                          </div>
                        );
                      })}
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>

          {showComposer && <EpisodeComposer ep={ep} show={show} onClose={() => setShowComposer(false)} />}
        </>
      );
    }

    // ============================================================================
    // EPISODE COMPOSER
    // ============================================================================
    function EpisodeComposer({ ep, show, onClose }) {
      const [text, setText] = useState('');
      const max = 280;

      return (
        <>
          <div className="overlay" onClick={onClose} style={{ zIndex: 'calc(var(--z-modal) + 1)' }} />
          <div className="bottom-sheet" style={{ zIndex: 'calc(var(--z-modal) + 2)' }}>
            <div className="sheet-handle" />
            
            <div style={{ padding: '0 var(--space-24) var(--space-40)' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 'var(--space-20)' }}>
                <h2 style={{ fontSize: 'var(--text-xl)', fontWeight: '700', color: 'var(--text-primary)' }}>Post Hot Take</h2>
                <button onClick={onClose} className="btn-ghost" style={{ padding: 'var(--space-8)' }}>
                  <Icon name="X" size={24} />
                </button>
              </div>

              {/* Episode Context */}
              <div className="card" style={{ padding: 'var(--space-16)', marginBottom: 'var(--space-20)' }}>
                <div style={{ fontSize: 'var(--text-sm)', color: 'var(--accent-primary)', fontWeight: '700', marginBottom: 'var(--space-6)' }}>{show.name}</div>
                <div style={{ fontSize: 'var(--text-base)', fontWeight: '600', color: 'var(--text-primary)' }}>S{ep.season}E{ep.episode}: {ep.name}</div>
              </div>

              <textarea
                value={text}
                onChange={(e) => setText(e.target.value.slice(0, max))}
                placeholder="This episode is ðŸ”¥"
                autoFocus
                className="input-field"
                style={{ minHeight: '120px', marginBottom: 'var(--space-16)', resize: 'vertical', fontFamily: 'inherit' }}
              />

              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 'var(--space-20)' }}>
                <span style={{ fontSize: 'var(--text-sm)', color: text.length > 250 ? 'var(--accent-error)' : 'var(--text-tertiary)', fontWeight: '600' }}>
                  {text.length}/{max}
                </span>
              </div>

              <button
                disabled={!text.trim()}
                className="btn-primary"
                style={{ width: '100%', opacity: text.trim() ? 1 : 0.5, cursor: text.trim() ? 'pointer' : 'not-allowed' }}
              >
                Post
              </button>
            </div>
          </div>
        </>
      );
    }

    // ============================================================================
    // HOT TAKES VIEW
    // ============================================================================
    function HotTakes({ onSelect, onCompose }) {
      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)' }}>
          <div style={{ position: 'sticky', top: 0, background: 'rgba(10,14,19,0.95)', backdropFilter: 'blur(20px)', borderBottom: '1px solid var(--border-subtle)', padding: 'var(--space-20) var(--space-24)', zIndex: 'var(--z-sticky)' }}>
            <h1 style={{ fontSize: 'var(--text-3xl)', fontWeight: '800', display: 'flex', alignItems: 'center', gap: 'var(--space-12)', color: 'var(--text-primary)' }}>
              <Icon name="Flame" size={32} style={{ color: 'var(--accent-primary)' }} />
              Hot Takes
            </h1>
          </div>

          <div style={{ padding: 'var(--space-20)' }}>
            {HOT_TAKES.map((take, i) => {
              const user = Object.values(USERS).find(u => u.id === take.userId);
              const episode = EPISODES.find(e => e.id === take.episodeId);
              const show = episode ? Object.values(SHOWS).find(s => s.id === episode.showId) : null;

              return (
                <div key={take.id} className="card animate-in" style={{ marginBottom: 'var(--space-16)', animationDelay: `${i * 40}ms` }}>
                  <div style={{ display: 'flex', gap: 'var(--space-12)', marginBottom: 'var(--space-16)' }}>
                    <div className="avatar">{user.username[0].toUpperCase()}</div>
                    <div style={{ flex: 1, minWidth: 0 }}>
                      <div style={{ fontSize: 'var(--text-base)', fontWeight: '600', color: 'var(--text-primary)' }}>{user.username}</div>
                      <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)' }}>{take.time}</div>
                    </div>
                    {take.isLive && <div className="badge-live">LIVE</div>}
                  </div>

                  {show && episode && (
                    <button
                      onClick={() => onSelect(show)}
                      className="card-interactive"
                      style={{ width: '100%', padding: 'var(--space-12)', background: 'var(--bg-elevated)', border: '1px solid var(--border-subtle)', borderRadius: 'var(--radius-md)', marginBottom: 'var(--space-16)', textAlign: 'left' }}
                    >
                      <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-8)' }}>
                        <span style={{ fontSize: 'var(--text-sm)', color: 'var(--accent-primary)', fontWeight: '700' }}>{show.name}</span>
                        <span style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)' }}>S{episode.season}E{episode.episode}</span>
                      </div>
                    </button>
                  )}

                  <div style={{ fontSize: 'var(--text-base)', color: 'var(--text-primary)', lineHeight: '1.6', marginBottom: 'var(--space-16)' }}>{take.content}</div>

                  <div style={{ display: 'flex', gap: 'var(--space-16)' }}>
                    <button className="btn-ghost" style={{ padding: 'var(--space-8)', fontSize: 'var(--text-sm)' }}>ðŸ”¥ {take.reactions.fire || 0}</button>
                    <button className="btn-ghost" style={{ padding: 'var(--space-8)', fontSize: 'var(--text-sm)' }}>ðŸ’€ {take.reactions.skull || 0}</button>
                  </div>
                </div>
              );
            })}
          </div>

          <button className="fab" onClick={onCompose}>
            <Icon name="Plus" size={28} />
          </button>
        </div>
      );
    }

    // ============================================================================
    // ACTIVITY VIEW (Instagram-style - YOUR notifications only)
    // ============================================================================
    function Activity({ onSelect }) {
      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)' }}>
          <div style={{ position: 'sticky', top: 0, background: 'rgba(10,14,19,0.95)', backdropFilter: 'blur(20px)', borderBottom: '1px solid var(--border-subtle)', padding: 'var(--space-20) var(--space-24)', zIndex: 'var(--z-sticky)' }}>
            <h1 style={{ fontSize: 'var(--text-3xl)', fontWeight: '800', color: 'var(--text-primary)' }}>Activity</h1>
            <p style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)', marginTop: 'var(--space-8)' }}>See who's engaging with your content</p>
          </div>

          <div style={{ padding: 'var(--space-20)' }}>
            {YOUR_ACTIVITY.map((activity, i) => {
              const user = Object.values(USERS).find(u => u.id === activity.userId);
              const episode = EPISODES.find(e => e.id === activity.episodeId);
              const show = episode ? Object.values(SHOWS).find(s => s.id === episode.showId) : null;

              return (
                <div key={activity.id} className="card card-interactive animate-in" onClick={() => show && onSelect(show)} style={{ marginBottom: 'var(--space-12)', animationDelay: `${i * 40}ms` }}>
                  <div style={{ display: 'flex', gap: 'var(--space-12)', alignItems: 'center' }}>
                    <div className="avatar" style={{ width: '48px', height: '48px', fontSize: 'var(--text-lg)' }}>
                      {user.username[0].toUpperCase()}
                    </div>
                    <div style={{ flex: 1, minWidth: 0 }}>
                      <div style={{ fontSize: 'var(--text-base)', color: 'var(--text-primary)', marginBottom: 'var(--space-4)' }}>
                        <span style={{ fontWeight: '700' }}>{user.username}</span>{' '}
                        <span style={{ color: 'var(--text-secondary)' }}>{activity.content}</span>
                      </div>
                      {show && episode && (
                        <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)' }}>
                          {show.name} â€¢ S{episode.season}E{episode.episode}
                        </div>
                      )}
                    </div>
                    <div style={{ flexShrink: 0, fontSize: 'var(--text-xs)', color: 'var(--text-tertiary)', fontWeight: '600' }}>
                      {activity.time}
                    </div>
                  </div>
                </div>
              );
            })}

            {YOUR_ACTIVITY.length === 0 && (
              <div className="card" style={{ padding: 'var(--space-40)', textAlign: 'center' }}>
                <div style={{ fontSize: 'var(--text-4xl)', marginBottom: 'var(--space-20)' }}>ðŸ””</div>
                <h3 style={{ fontSize: 'var(--text-xl)', fontWeight: '700', marginBottom: 'var(--space-12)', color: 'var(--text-primary)' }}>No activity yet</h3>
                <p style={{ fontSize: 'var(--text-base)', color: 'var(--text-secondary)', lineHeight: '1.6' }}>
                  When people like or comment on your posts, you'll see it here
                </p>
              </div>
            )}
          </div>
        </div>
      );
    }

    // ============================================================================
    // PROFILE VIEW
    // ============================================================================
    function Profile() {
      const user = USERS.current;
      const rated = Object.keys(storage.ratings).length;
      const myTakes = HOT_TAKES.filter(t => t.userId === user.id).length;

      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)', padding: 'var(--space-24)' }}>
          <div className="glass-card" style={{ padding: 'var(--space-24)', marginBottom: 'var(--space-24)' }}>
            <div style={{ display: 'flex', gap: 'var(--space-20)', marginBottom: 'var(--space-24)' }}>
              <div className="avatar-lg">{user.username[0].toUpperCase()}</div>
              <div style={{ flex: 1 }}>
                <h2 style={{ fontSize: 'var(--text-2xl)', fontWeight: '700', marginBottom: 'var(--space-6)', color: 'var(--text-primary)' }}>{user.name}</h2>
                <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)', marginBottom: 'var(--space-12)' }}>@{user.username}</div>
                <div style={{ fontSize: 'var(--text-base)', color: 'var(--text-secondary)', lineHeight: '1.6' }}>
                  TV enthusiast â€¢ Hot takes only ðŸ”¥
                </div>
              </div>
            </div>

            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 'var(--space-24)', paddingTop: 'var(--space-24)', borderTop: '1px solid var(--border-subtle)' }}>
              <div style={{ textAlign: 'center' }}>
                <div className="text-gradient" style={{ fontSize: 'var(--text-3xl)', fontWeight: '800', marginBottom: 'var(--space-6)' }}>{rated}</div>
                <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)', fontWeight: '600' }}>Rated</div>
              </div>
              <div style={{ textAlign: 'center' }}>
                <div className="text-gradient" style={{ fontSize: 'var(--text-3xl)', fontWeight: '800', marginBottom: 'var(--space-6)' }}>{myTakes}</div>
                <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)', fontWeight: '600' }}>Hot Takes</div>
              </div>
              <div style={{ textAlign: 'center' }}>
                <div className="text-gradient" style={{ fontSize: 'var(--text-3xl)', fontWeight: '800', marginBottom: 'var(--space-6)' }}>2</div>
                <div style={{ fontSize: 'var(--text-sm)', color: 'var(--text-tertiary)', fontWeight: '600' }}>Following</div>
              </div>
            </div>
          </div>

          <div className="glass-card" style={{ padding: 'var(--space-32)', textAlign: 'center' }}>
            <div style={{ fontSize: 'var(--text-4xl)', marginBottom: 'var(--space-20)' }}>ðŸ“º</div>
            <h3 style={{ fontSize: 'var(--text-xl)', fontWeight: '700', marginBottom: 'var(--space-12)', color: 'var(--text-primary)' }}>Episodic Premium</h3>
            <p style={{ fontSize: 'var(--text-base)', color: 'var(--text-secondary)', lineHeight: '1.6' }}>
              Mobile-first TV tracker. Rate episodes, post hot takes, see who's watching. Built with 10 years of product excellence.
            </p>
          </div>
        </div>
      );
    }

    // ============================================================================
    // GENERAL COMPOSER
    // ============================================================================
    function Composer({ onClose }) {
      const [text, setText] = useState('');
      const max = 280;

      return (
        <>
          <div className="overlay" onClick={onClose} />
          <div className="bottom-sheet" style={{ maxHeight: '80vh' }}>
            <div className="sheet-handle" />
            
            <div style={{ padding: '0 var(--space-24) var(--space-40)' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 'var(--space-24)' }}>
                <h2 style={{ fontSize: 'var(--text-xl)', fontWeight: '700', color: 'var(--text-primary)' }}>Post Hot Take</h2>
                <button onClick={onClose} className="btn-ghost" style={{ padding: 'var(--space-8)' }}>
                  <Icon name="X" size={24} />
                </button>
              </div>

              <textarea
                value={text}
                onChange={(e) => setText(e.target.value.slice(0, max))}
                placeholder="What's your hot take? ðŸ”¥"
                autoFocus
                className="input-field"
                style={{ minHeight: '140px', marginBottom: 'var(--space-16)', resize: 'vertical', fontFamily: 'inherit' }}
              />

              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 'var(--space-24)' }}>
                <span style={{ fontSize: 'var(--text-sm)', color: text.length > 250 ? 'var(--accent-error)' : 'var(--text-tertiary)', fontWeight: '600' }}>
                  {text.length}/{max}
                </span>
              </div>

              <button
                disabled={!text.trim()}
                className="btn-primary"
                style={{ width: '100%', opacity: text.trim() ? 1 : 0.5, cursor: text.trim() ? 'pointer' : 'not-allowed' }}
              >
                Post
              </button>
            </div>
          </div>
        </>
      );
    }

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>